apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: supplychainlvalidator3ibft
  namespace: supplychainl-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: supplychainlvalidator3ibft
  chart:
    git: git@github.com:lakshyakumar/blockchain-automation-framework.git
    ref: test2
    path: platforms/hyperledger-besu/charts/node_validator 
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://693d334e7084e7f85488b055eab3bb70c7b7e852d3fb42bbb2707b4619ff7999de2f06752f436c3d636a8a54a45696194750796b48f1e5d7211936492bf628b1@3.251.3.16:15050"
      - "enode://fb0a812e1a1a841a076274dccdaf0a50fe639d4179239d8c854de6ced3cbf01998cc9805b3e6faa82df7e14b962c52113ddf9b01f189a9b203bca22c603cceaf@3.251.3.16:15060"
      - "enode://2d47c34da0e606016d4bec3ada2ad41fb685012b632ba9c157eb0538f65497255cf77d249ee08ed0aef3f6215042f95bd1a7fceb3f6ec03d2e39e5e21b0e53a7@3.251.3.16:15070"
      - "enode://04ce3b2b11ab7203522998ea749d3eb4011c22ac1cb80bacab8161e859883fc5701c109578859b516a23c69364b814c17a420c4c2b899441a898b80d43cd42bc@3.251.3.16:15080"
      - "enode://7566d2aa556ee3cbac41fe63d69696458b61227a76825d42d9dd380168cc0c9b379ed3aac7a0ea5a5c1aa1536fe9bc659afb4cea435cf37a18bf46ddf2663da7@3.251.3.16:15010"
      - "enode://a4c27c2d161bbd81f0a45a954ae9bc147b7db264be1441f1f03f6d9551a0edf0f6359217245e8350ba46497be6c10d8a9a82e596650721b0e845fd8eb6ec35bf@3.251.3.16:15020"
      - "enode://4636efaaef36ab709eb6329fac974280aadefdc15a2c0ee500c7604a36a389ee831ec18743e711f271c2605ed14cb7b015bdfd17050e424c04d5cfe26fda9784@3.251.3.16:15030"
      - "enode://b456f2d3d4ea08bd10238fba120983764f60dcc6a5c49dccc99726f7dd63ea14f0cd9269d61d7ba8b55d06f7cde2c74416cb79c8b0f2e8dc29bbafaa4688ccfc@3.251.3.16:15040"

    metadata:
      namespace: supplychainl-bes
      labels:

    ambassador:
      external_url_suffix: rc.dev2.aws.blockchaincloudpoc-develop.com

    liveliness_check:
      enabled: false

    proxy:
      provider: ambassador
      external_url: supplychainl.rc.dev2.aws.blockchaincloudpoc-develop.com
      p2p: 15070
      rpc: 15071

    images:
      node: hyperledger/besu:1.4.4
      alpineutils: hyperledgerlabs/alpine-utils:1.0

    node:
      name: validator3
      tls: True
      consensus: ibft
      mountPath: /etc/genesis
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://vault.internal.dev2.aws.blockchaincloudpoc-develop.com:20001
      secretprefix: secret/supplychainl-bes/crypto/validator3
      serviceaccountname: vault-auth
      keyname: data
      tlsdir: tls
      role: vault-role
      authpath: besusupplychainl

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMTgsCiAgICAiY29uc3RhbnRpbm9wbGVmaXhibG9jayI6IDAsCiAgICAiY29udHJhY3RTaXplTGltaXQiOiAyMTQ3NDgzNjQ3LAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiAxMAogICAgfQogIH0sCiAgIm5vbmNlIjogIjB4MCIsCiAgInRpbWVzdGFtcCI6ICIweDU4ZWU0MGJhIiwKICAiZ2FzTGltaXQiOiAiMHgxZmZmZmZmZmZmZmZmZiIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAiZXh0cmFEYXRhIjogIjB4Zjg3ZWEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGY4NTQ5NDNjNzEwMjg1OGQ5ODQxNmJlNzM4YTY3MDY5MTAwMGY2MDhjYTAwZDM5NGZiZjZmM2ExZWI5MjY3YzQ1MWY5NWU5YzcyNDBiOTJlNTUwN2NiYTY5NDI0YzY5NWNjYmJjNjBiNWI5NTEwZDU3YjkzZjQxM2MzZTY2ZWRkZmU5NGJmOWExMzQzMjJjZjUwNDMyYWFkN2VhNjVmYmUxNjYyYmI4ZjI1NzU4MDg0MDAwMDAwMDBjMCIKfQ==
