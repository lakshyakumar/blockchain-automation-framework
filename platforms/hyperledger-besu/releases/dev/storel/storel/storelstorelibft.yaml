apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: storelstorelibft
  namespace: storel-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: storelstorelibft
  chart:
    git: git@github.com:lakshyakumar/blockchain-automation-framework.git
    ref: test2
    path: platforms/hyperledger-besu/charts/node_orion 
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://e210fa47fb0fdf668dfb3ca6c2a0bd5cbceedd6ca0bf4b0edab07b06b0efffaf96d37d2d12977ad37fba900ca0181d3828560b0536a6440a05fe303d2a4cd766@52.212.240.252:15050"
      - "enode://f3e45cdc9a5d1a89141f2d8043a998d9103fb7e08c56c73c93379223ec1314265f1c237d9b3489066a8f1674545408545a93c005fb6f4a55ebf519caeb7f862c@52.212.240.252:15060"
      - "enode://b1501cf745948f0326dd7dbc816639c2778bacf189e17e8677746e55d9d6b657e0eb19febe4cb34bea36ee263e1f6a893fca0a0ce46c0116aa7c01f71f8a36af@52.212.240.252:15070"
      - "enode://cb2d5b1c0022ee1b42d257f930705e0468dcd114b5318c5fd39745465e8e172692afd6b2bff431464b05d6d6903719235a07e732d266b4edcd820234a8268fab@52.212.240.252:15080"
      - "enode://8de4c073ce80577bd80ff6b984a29cdd496a3e5e5e63d163ddb70dbd784d747658909283ea412f3d72d483b2bb73b75d1e9bad83e67f70dfdad4efa86cebf6d6@52.212.240.252:15010"
      - "enode://8e9d5f9089b9fd81b761e6fb341b8e236c0b9bd53c64c784e7298ea394bf0fcd0d6ceb405d2e7f5526b52942a87b8ef45f1c75f817e085ef40e27d04b1ca3802@52.212.240.252:15020"
      - "enode://343a952adf36b0520ffe825972527433c4d593567f3040a1f0630716cf55aa162e1f65f72a9e2d27a6a2f3345cc2ea86ff3b357a14a2f5a354cc8a49e701ffae@52.212.240.252:15030"
      - "enode://bf01c9514fd50b5ab0c2f282b0fd398300e5b41248b42f89acf7d0f43e77b202b04f3d2c52f12fb63a32cf1d09b8bd6541213e83716c637be80ce8f877431af0@52.212.240.252:15040"

    metadata:
      namespace: storel-bes
      labels:

    liveliness_check:
      enabled: false

    proxy:
      provider: ambassador
      external_url: storel.rc.dev2.aws.blockchaincloudpoc-develop.com
      p2p: 15030
      rpc: 15031
      tmport: 15033

    images:
      node: hyperledger/besu:1.5.5
      alpineutils: hyperledgerlabs/alpine-utils:1.0
      orion: pegasyseng/orion:1.6.0

    node:
      name: storel
      consensus: ibft
      subject: O=Store,OU=Store,L=New York,C=US
      mountPath: /etc/genesis
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    orion:
      name: orion
      tls: True
      confdir: /etc/config
      url: "https://storel.rc.dev2.aws.blockchaincloudpoc-develop.com"
      nodelist: "\"https://carrierl.rc.dev2.aws.blockchaincloudpoc-develop.com:15013\",\"https://manufacturerl.rc.dev2.aws.blockchaincloudpoc-develop.com:15023\",\"https://warehousel.rc.dev2.aws.blockchaincloudpoc-develop.com:15043\""
      trust: ca-or-tofu
      ports:
        nodeport: 8888
        clientport: 8080

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://vault.internal.dev2.aws.blockchaincloudpoc-develop.com:20001
      secretprefix: secret/storel-bes/crypto/storel
      serviceaccountname: vault-auth
      keyname: data
      oriondir: orion
      tlsdir: tls
      role: vault-role
      authpath: besustorel

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMTgsCiAgICAiY29uc3RhbnRpbm9wbGVmaXhibG9jayI6IDAsCiAgICAiY29udHJhY3RTaXplTGltaXQiOiAyMTQ3NDgzNjQ3LAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiAxMAogICAgfQogIH0sCiAgIm5vbmNlIjogIjB4MCIsCiAgInRpbWVzdGFtcCI6ICIweDU4ZWU0MGJhIiwKICAiZ2FzTGltaXQiOiAiMHgxZmZmZmZmZmZmZmZmZiIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAiZXh0cmFEYXRhIjogIjB4Zjg3ZWEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGY4NTQ5NDBhODM5MmI1MTFkZjYzNjNiMGNiYjFlMmJhNDkzYTgwOGFmN2I2YjY5NDkzZDhjYmJiMzlkODViNmNhMjg5YjE4ZGNhM2E1Yjk0M2U3OGEyMTE5NDE5ZDY1NDMxNmQwMTc3ODgzMWUwMzUwZmZkY2VkMWM0NzVlYzE4ZmM5NDQ3MDAwZDRmMDYyOTdmZTU0YzQxZjQ0YTJlZmE3ZDliNzNjZjlmNjQ4MDg0MDAwMDAwMDBjMCIKfQ==
