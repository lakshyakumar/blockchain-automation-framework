apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: warehouselwarehouselibft
  namespace: warehousel-bes
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: warehouselwarehouselibft
  chart:
    git: git@github.com:lakshyakumar/blockchain-automation-framework.git
    ref: test2
    path: platforms/hyperledger-besu/charts/node_orion 
  values:
    replicaCount: 1

    healthcheck:
      readinessthreshold: 100
      readinesscheckinterval: 5

    staticnodes:
      - "enode://6f97cdaa1f8cafe8ee6d1025ea2115899f6d557e657e675be08d90dfebfdfebbd9418e59423d6ff4c112a6da519b2263381d0e0bbc858f92406ab083c5c96b01@54.229.122.144:15050"
      - "enode://ce386c8abdd11cd5182d86da8bfdf93b38fc72e800027329fe8e121c483cd2fa9516925e7e7e1a87bf3c3c2c639681c3a71b1f6d1c710d57c24685138f3e926b@54.229.122.144:15060"
      - "enode://614419236292330b6988e5090c81466db45f10b808b29e889348f66c3e20e200ef81e2cfaed518d27342c25b8f963a389ae34559806d6ebc0f40cb36e743c13a@54.229.122.144:15070"
      - "enode://dd0b8d2bab394a65ff85c8862ac07258470e0c4df0382ed9bd0eda44334b7d1940cc18198d70f39d4bdc990c3e82f67d67a703c0d509328d72f851be9f07c6c1@54.229.122.144:15080"
      - "enode://2c12ccce6ea280077d5ac125aa4acfb1c030abbe023737dba1516a0f272224c341359ade4ff4d20b2f77a9bb6c49d31ae629990a9c9b6e47db16c34ab2b67767@54.229.122.144:15010"
      - "enode://25107d6f826b5bb402ea57fad1ac7737ab3ac09e1925bb9aac426ad28cc875c68fe3c3d93449b740e67f07eef8e115197d29060075b97b66677edfd275c1649e@54.229.122.144:15020"
      - "enode://42c5c2a95a29446789221f43754735b37488749b3f30e93528e4712c20dbb78a0b44e13b699814dfa782c3fa1b94d64993c92cea84da1b7c4e5ff464be55c303@54.229.122.144:15030"
      - "enode://aca475d5c6ed58d530b722b7421644c0518c4aa523ca1d47924fdd7c59d19c1d3147be010954a2e8bcc61a4513ad1054e36d28fe194c17ccbd5d76a3061228ef@54.229.122.144:15040"

    metadata:
      namespace: warehousel-bes
      labels:

    liveliness_check:
      enabled: false

    proxy:
      provider: ambassador
      external_url: warehousel.rc.dev2.aws.blockchaincloudpoc-develop.com
      p2p: 15040
      rpc: 15041
      tmport: 15043

    images:
      node: hyperledger/besu:1.4.4
      alpineutils: hyperledgerlabs/alpine-utils:1.0
      orion: pegasyseng/orion:1.5.2

    node:
      name: warehousel
      consensus: ibft
      subject: O=Warehouse,OU=Warehouse,L=Boston,C=US
      mountPath: /etc/genesis
      servicetype: ClusterIP
      imagePullSecret: regcred
      ports:
        p2p: 30303
        rpc: 8545
        ws: 8546

    orion:
      name: orion
      tls: True
      confdir: /etc/config
      url: "https://warehousel.rc.dev2.aws.blockchaincloudpoc-develop.com"
      nodelist: "\"https://carrierl.rc.dev2.aws.blockchaincloudpoc-develop.com:15013\",\"https://manufacturerl.rc.dev2.aws.blockchaincloudpoc-develop.com:15023\",\"https://storel.rc.dev2.aws.blockchaincloudpoc-develop.com:15033\""
      trust: ca-or-tofu
      ports:
        nodeport: 8888
        clientport: 8080

    storage:
      storageclassname: awsstorageclass
      storagesize: 1Gi

    vault:
      address: http://vault.internal.dev2.aws.blockchaincloudpoc-develop.com:20001
      secretprefix: secret/warehousel-bes/crypto/warehousel
      serviceaccountname: vault-auth
      keyname: data
      oriondir: orion
      tlsdir: tls
      role: vault-role
      authpath: besuwarehousel

    genesis: ewogICJjb25maWciOiB7CiAgICAiY2hhaW5JZCI6IDIwMTgsCiAgICAiY29uc3RhbnRpbm9wbGVmaXhibG9jayI6IDAsCiAgICAiY29udHJhY3RTaXplTGltaXQiOiAyMTQ3NDgzNjQ3LAogICAgImliZnQyIjogewogICAgICAiYmxvY2twZXJpb2RzZWNvbmRzIjogMiwKICAgICAgImVwb2NobGVuZ3RoIjogMzAwMDAsCiAgICAgICJyZXF1ZXN0dGltZW91dHNlY29uZHMiOiAxMAogICAgfQogIH0sCiAgIm5vbmNlIjogIjB4MCIsCiAgInRpbWVzdGFtcCI6ICIweDU4ZWU0MGJhIiwKICAiZ2FzTGltaXQiOiAiMHgxZmZmZmZmZmZmZmZmZiIsCiAgImRpZmZpY3VsdHkiOiAiMHgxIiwKICAiZXh0cmFEYXRhIjogIjB4Zjg3ZWEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMGY4NTQ5NDQ3NmQxMDI0MTI5YzRmZjkyNjE3ZDQ4OGRjMzk1YjI3ZjZlOTdmNDI5NDBmZDhlMTM3M2NlNGMzNmVhODQ1ODRlYjJlNzQxMzZjMjUzOWMyMWQ5NDc0YjA1ZmI0MmIyODRiODMwNDZkMjcwODEyOGY3NDJlNGE3YzA4ZTE5NGJkYjdkZTQ3YTJiOGE2Y2QyODYyYjgzYTRmODM4YzZhZjMwYjFhMWU4MDg0MDAwMDAwMDBjMCIKfQ==
